{% load i18n static account socialaccount %}
{% load crispy_forms_tags %} {# crispy_forms 쓰면 자동 부트스트랩 적용 (#없어도 동작) #}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>로그인 - ITSW</title>
  <link rel="stylesheet" href="{% static 'blog/bootstrap/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'blog/custom_css/custom.css' %}">
  <style>
    .auth-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#f7f7f9}
    .auth-card{max-width:880px;width:100%;border:0;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.08)}
    .brand{font-weight:800;letter-spacing:.5px}
    .side-hero{background:linear-gradient(135deg,#4f46e5,#22c55e);color:#fff;border-radius:18px 0 0 18px}
    .side-hero .caption{opacity:.9}
    .btn-google{border:1px solid #ccc; background:#fff}
    .muted{color:#6b7280}
    .form-text a{color:#4f46e5}
    .divider{display:flex;align-items:center;gap:12px;margin:16px 0}
    .divider:before,.divider:after{content:"";flex:1;height:1px;background:#e5e7eb}
    .avatar-hero{width:72px;height:72px;border-radius:50%;background:rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  {% include 'blog/navbar.html' %}

  <div class="auth-wrap py-5">
    <div class="container">
      <div class="row no-gutters justify-content-center">
        <div class="col-lg-10">
          <div class="auth-card bg-white overflow-hidden">
            <div class="row no-gutters">
              <!-- 좌측 홍보/브랜드 -->
              <div class="col-md-5 p-4 p-md-5 side-hero d-flex flex-column justify-content-between">
                <div>
                  <div class="avatar-hero mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20l9-9-9 9z"/><path d="M12 12l9 9"/></svg>
                  </div>
                  <h3 class="mb-2">ITSW 계정 로그인</h3>
                  <p class="caption">블로그 글 작성, 댓글, 프로필 기능을 사용하려면 로그인하세요.</p>
                </div>
                <p class="mb-0 small">© {{ now|date:"Y" }} ITSW</p>
              </div>

              <!-- 우측 실제 로그인 -->
              <div class="col-md-7 p-4 p-md-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <div class="brand h5 mb-0">Welcome back 👋</div>
                </div>

                {# 메시지 표시 #}
                {% if messages %}
                  <div class="mb-3">
                    {% for message in messages %}
                      <div class="alert alert-{{ message.tags|default:'info' }} mb-2">{{ message }}</div>
                    {% endfor %}
                  </div>
                {% endif %}

                <form method="post" action="{% url 'account_login' %}" novalidate>
                  {% csrf_token %}
                  {# crispy가 있으면 아래 1줄, 없으면 각 필드 수동 렌더링 #}
                  {% if form|length %}{{ form|crispy }}{% else %}{{ form.as_p }}{% endif %}

                  <div class="d-flex justify-content-between align-items-center mt-2">
                    <div class="form-text muted">
                      <a href="{% url 'account_reset_password' %}">비밀번호 찾기</a>
                    </div>
                    <button type="submit" class="btn btn-primary px-4">로그인</button>
                  </div>
                </form>

                <div class="divider"><span class="muted small">또는</span></div>

                <!-- 소셜 로그인(예: Google) -->
                {% providers_media_js %}
                <a class="btn btn-google btn-block py-2 mb-2" href="{% provider_login_url 'google' %}">
                  <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18" class="mr-2" alt=""> Google로 계속하기
                </a>

                <p class="mt-3 muted">
                  계정이 없으신가요?
                  <a href="{% url 'account_signup' %}">회원가입</a>
                </p>
              </div>
            </div>
          </div> <!-- /card -->
        </div>
      </div>
    </div>
  </div>

  {% include 'blog/footer.html' %}
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
